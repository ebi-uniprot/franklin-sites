import{r as B,j as R}from"./iframe-CjE16azO.js";import{e as l,s as $,d as Pe,i as Re,b as ye,c as Ie,u as Xe,l as be,H as Ye,g as Ke,a as Oe}from"./probability-distribution-sample-DLW0a0Wd.js";import{c as He}from"./index-BUAxYCfm.js";import"./preload-helper-BDBacUwf.js";function De(){for(var e=l,s;s=e.sourceEvent;)e=s;return e}function Ce(e,s){var c=e.ownerSVGElement||e;if(c.createSVGPoint){var m=c.createSVGPoint();return m.x=s.clientX,m.y=s.clientY,m=m.matrixTransform(e.getScreenCTM().inverse()),[m.x,m.y]}var k=e.getBoundingClientRect();return[s.clientX-k.left-e.clientLeft,s.clientY-k.top-e.clientTop]}function Fe(e){var s=De();return s.changedTouches&&(s=s.changedTouches[0]),Ce(e,s)}function Le(e,s,c){arguments.length<3&&(c=s,s=De().changedTouches);for(var m=0,k=s?s.length:0,f;m<k;++m)if((f=s[m]).identifier===c)return Ce(e,f);return null}function he(){l.preventDefault(),l.stopImmediatePropagation()}function Ue(e){var s=e.document.documentElement,c=$(e).on("dragstart.drag",he,!0);"onselectstart"in s?c.on("selectstart.drag",he,!0):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function We(e,s){var c=e.document.documentElement,m=$(e).on("dragstart.drag",null);s&&(m.on("click.drag",he,!0),setTimeout(function(){m.on("click.drag",null)},0)),"onselectstart"in c?m.on("selectstart.drag",null):(c.style.MozUserSelect=c.__noselect,delete c.__noselect)}function ie(e){return function(){return e}}function Je(e,s,c){this.target=e,this.type=s,this.selection=c}function we(){l.stopImmediatePropagation()}function oe(){l.preventDefault(),l.stopImmediatePropagation()}var xe={},ue={name:"space"},K={name:"handle"},O={name:"center"};function _e(e){return[+e[0],+e[1]]}function Me(e){return[_e(e[0]),_e(e[1])]}function Qe(e){return function(s){return Le(s,l.touches,e)}}var ae={name:"x",handles:["w","e"].map(fe),input:function(e,s){return e==null?null:[[+e[0],s[0][1]],[+e[1],s[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},le={},q={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Se={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ee={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ze={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},et={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function fe(e){return{type:e}}function tt(){return!l.ctrlKey&&!l.button}function nt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function rt(){return navigator.maxTouchPoints||"ontouchstart"in this}function ce(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function at(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function st(){return it(ae)}function it(e){var s=nt,c=tt,m=rt,k=!0,f=Pe("start","brush","end"),w=6,A;function d(t){var r=t.property("__brush",N).selectAll(".overlay").data([fe("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",q.overlay).merge(r).each(function(){var n=ce(this).extent;$(this).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1])}),t.selectAll(".selection").data([fe("selection")]).enter().append("rect").attr("class","selection").attr("cursor",q.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var a=t.selectAll(".handle").data(e.handles,function(n){return n.type});a.exit().remove(),a.enter().append("rect").attr("class",function(n){return"handle handle--"+n.type}).attr("cursor",function(n){return q[n.type]}),t.each(j).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",z).filter(m).on("touchstart.brush",z).on("touchmove.brush",P).on("touchend.brush touchcancel.brush",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.move=function(t,r){t.selection?t.on("start.brush",function(){D(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){D(this,arguments).end()}).tween("brush",function(){var a=this,n=a.__brush,o=D(a,arguments),u=n.selection,p=e.input(typeof r=="function"?r.apply(this,arguments):r,n.extent),i=Re(u,p);function V(h){n.selection=h===1&&p===null?null:i(h),j.call(a),o.brush()}return u!==null&&p!==null?V:V(1)}):t.each(function(){var a=this,n=arguments,o=a.__brush,u=e.input(typeof r=="function"?r.apply(a,n):r,o.extent),p=D(a,n).beforestart();ye(a),o.selection=u===null?null:u,j.call(a),p.start().brush().end()})},d.clear=function(t){d.move(t,null)};function j(){var t=$(this),r=ce(this).selection;r?(t.selectAll(".selection").style("display",null).attr("x",r[0][0]).attr("y",r[0][1]).attr("width",r[1][0]-r[0][0]).attr("height",r[1][1]-r[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(a){return a.type[a.type.length-1]==="e"?r[1][0]-w/2:r[0][0]-w/2}).attr("y",function(a){return a.type[0]==="s"?r[1][1]-w/2:r[0][1]-w/2}).attr("width",function(a){return a.type==="n"||a.type==="s"?r[1][0]-r[0][0]+w:w}).attr("height",function(a){return a.type==="e"||a.type==="w"?r[1][1]-r[0][1]+w:w})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function D(t,r,a){var n=t.__brush.emitter;return n&&(!a||!n.clean)?n:new G(t,r,a)}function G(t,r,a){this.that=t,this.args=r,this.state=t.__brush,this.active=0,this.clean=a}G.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Ie(new Je(d,t,e.output(this.state.selection)),f.apply,f,[t,this.that,this.args])}};function z(){if(A&&!l.touches||!c.apply(this,arguments))return;var t=this,r=l.target.__data__.type,a=(k&&l.metaKey?r="overlay":r)==="selection"?xe:k&&l.altKey?O:K,n=e===le?null:Ze[r],o=e===ae?null:et[r],u=ce(t),p=u.extent,i=u.selection,V=p[0][0],h,g,C=p[0][1],b,M,I=p[1][0],x,S,X=p[1][1],_,E,v=0,y=0,se,Z=n&&o&&k&&l.shiftKey,ee,te,me=l.touches?Qe(l.changedTouches[0].identifier):Fe,F=me(t),L=F,U=D(t,arguments,!0).beforestart();r==="overlay"?(i&&(se=!0),u.selection=i=[[h=e===le?V:F[0],b=e===ae?C:F[1]],[x=e===le?I:h,_=e===ae?X:b]]):(h=i[0][0],b=i[0][1],x=i[1][0],_=i[1][1]),g=h,M=b,S=x,E=_;var de=$(t).attr("pointer-events","none"),W=de.selectAll(".overlay").attr("cursor",q[r]);if(l.touches)U.moved=ge,U.ended=ve;else{var pe=$(l.view).on("mousemove.brush",ge,!0).on("mouseup.brush",ve,!0);k&&pe.on("keydown.brush",je,!0).on("keyup.brush",Ge,!0),Ue(l.view)}we(),ye(t),j.call(t),U.start();function ge(){var T=me(t);Z&&!ee&&!te&&(Math.abs(T[0]-L[0])>Math.abs(T[1]-L[1])?te=!0:ee=!0),L=T,se=!0,oe(),Y()}function Y(){var T;switch(v=L[0]-F[0],y=L[1]-F[1],a){case ue:case xe:{n&&(v=Math.max(V-h,Math.min(I-x,v)),g=h+v,S=x+v),o&&(y=Math.max(C-b,Math.min(X-_,y)),M=b+y,E=_+y);break}case K:{n<0?(v=Math.max(V-h,Math.min(I-h,v)),g=h+v,S=x):n>0&&(v=Math.max(V-x,Math.min(I-x,v)),g=h,S=x+v),o<0?(y=Math.max(C-b,Math.min(X-b,y)),M=b+y,E=_):o>0&&(y=Math.max(C-_,Math.min(X-_,y)),M=b,E=_+y);break}case O:{n&&(g=Math.max(V,Math.min(I,h-v*n)),S=Math.max(V,Math.min(I,x+v*n))),o&&(M=Math.max(C,Math.min(X,b-y*o)),E=Math.max(C,Math.min(X,_+y*o)));break}}S<g&&(n*=-1,T=h,h=x,x=T,T=g,g=S,S=T,r in Se&&W.attr("cursor",q[r=Se[r]])),E<M&&(o*=-1,T=b,b=_,_=T,T=M,M=E,E=T,r in Ee&&W.attr("cursor",q[r=Ee[r]])),u.selection&&(i=u.selection),ee&&(g=i[0][0],S=i[1][0]),te&&(M=i[0][1],E=i[1][1]),(i[0][0]!==g||i[0][1]!==M||i[1][0]!==S||i[1][1]!==E)&&(u.selection=[[g,M],[S,E]],j.call(t),U.brush())}function ve(){if(we(),l.touches){if(l.touches.length)return;A&&clearTimeout(A),A=setTimeout(function(){A=null},500)}else We(l.view,se),pe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);de.attr("pointer-events","all"),W.attr("cursor",q.overlay),u.selection&&(i=u.selection),at(i)&&(u.selection=null,j.call(t)),U.end()}function je(){switch(l.keyCode){case 16:{Z=n&&o;break}case 18:{a===K&&(n&&(x=S-v*n,h=g+v*n),o&&(_=E-y*o,b=M+y*o),a=O,Y());break}case 32:{(a===K||a===O)&&(n<0?x=S-v:n>0&&(h=g-v),o<0?_=E-y:o>0&&(b=M-y),a=ue,W.attr("cursor",q.selection),Y());break}default:return}oe()}function Ge(){switch(l.keyCode){case 16:{Z&&(ee=te=Z=!1,Y());break}case 18:{a===O&&(n<0?x=S:n>0&&(h=g),o<0?_=E:o>0&&(b=M),a=K,Y());break}case 32:{a===ue&&(l.altKey?(n&&(x=S-v*n,h=g+v*n),o&&(_=E-y*o,b=M+y*o),a=O):(n<0?x=S:n>0&&(h=g),o<0?_=E:o>0&&(b=M),a=K),W.attr("cursor",q[r]),Y());break}default:return}oe()}}function P(){D(this,arguments).moved()}function Q(){D(this,arguments).ended()}function N(){var t=this.__brush||{selection:null};return t.extent=Me(s.apply(this,arguments)),t.dim=e,t}return d.extent=function(t){return arguments.length?(s=typeof t=="function"?t:ie(Me(t)),d):s},d.filter=function(t){return arguments.length?(c=typeof t=="function"?t:ie(!!t),d):c},d.touchable=function(t){return arguments.length?(m=typeof t=="function"?t:ie(!!t),d):m},d.handleSize=function(t){return arguments.length?(w=+t,d):w},d.keyModifiers=function(t){return arguments.length?(k=!!t,d):k},d.on=function(){var t=f.on.apply(f,arguments);return t===f?d:t},d}const qe=({min:e,max:s,values:c,unfilteredValues:m,unfilteredValuesShadow:k,selectedRange:f,onChange:w,nBins:A=30,height:d=50,className:j,...D})=>{const G=B.useRef(null),[z]=Xe(G),P=B.useRef(null),Q=B.useRef(w);Q.current=w;const[N,t]=B.useMemo(()=>{const u=e===void 0?Math.min(...c):e,p=s===void 0?Math.max(...c):s;return[u,p]},[s,e,c]),[r,a]=B.useState(`${N}`),[n,o]=B.useState(`${t}`);return B.useEffect(()=>{if(!z)return;const u=be().domain([N,t]).range([0,z.width]),p=V=>()=>{const h=l.selection;if(l.sourceEvent&&h){const g=+`${u.invert(h[0]).toPrecision(4)}`,C=+`${u.invert(h[1]).toPrecision(4)}`;a(`${g}`),o(`${C}`),V==="end"&&Q.current([g,C])}};P.current=st().extent([[0,0],[z.width,z.height]]).on("start brush",p()).on("end",p("end"));const i=$(G.current).append("g");return P.current(i),()=>{var V;(V=P.current)==null||V.on("start brush end",null),i.remove()}},[z,N,t]),B.useEffect(()=>{var p,i;if(!z)return;const u=be().domain([N,t]).range([0,z.width]);f[0]===N&&f[1]===t?(p=P.current)==null||p.move($(G.current).select("g"),null):(i=P.current)==null||i.move($(G.current).select("g"),[u(f[0]),u(f[1])])},[N,t,f,z]),R.jsxs("div",{className:He("histogram-filter",j),...D,children:[R.jsx(Ye,{values:c,unfilteredValues:m,unfilteredValuesShadow:k,selectedRange:f,nBins:A,min:N,max:t,height:d,children:R.jsx("svg",{ref:G,width:"100%",height:"100%"})}),R.jsxs("div",{className:"histogram-filter__text-input-container",children:[R.jsx("input",{type:"text",onChange:u=>{const p=u.target.value;a(u.target.value);const i=+p;!Number.isNaN(i)&&i<f[1]&&i>=N&&w([i,f[1]])},onBlur:()=>a(`${f[0]}`),value:r,style:{width:`${r.length+2}ch`}}),R.jsx("input",{type:"text",onChange:u=>{const p=u.target.value;o(u.target.value);const i=+p;!Number.isNaN(i)&&i>f[0]&&i<=t&&w([f[0],i])},onBlur:()=>o(`${f[1]}`),value:n,style:{width:`${n.length+2}ch`}})]})]})};try{histogramfilter.displayName="histogramfilter",histogramfilter.__docgenInfo={description:"",displayName:"histogramfilter",props:{min:{defaultValue:null,description:`The left-most, smallest, value the histogram starts at irrespective of the
array values. Defaults to min(values).`,name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:`The right-most, largest, value the histogram ends at irrespective of the
array values. Defaults to max(values).`,name:"max",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"An array of values which the histogram is based on.",name:"values",required:!0,type:{name:"number[]"}},unfilteredValues:{defaultValue:null,description:`An array of unfiltered values which the histogram is based on.
(useful to calculate max bin height)`,name:"unfilteredValues",required:!1,type:{name:"number[]"}},selectedRange:{defaultValue:null,description:"A value which specifies the start and end points selected by the user.",name:"selectedRange",required:!0,type:{name:"Range"}},onChange:{defaultValue:null,description:"A callback that returns the selected and final (ie after drag) range.",name:"onChange",required:!0,type:{name:"(range: Range) => unknown"}},nBins:{defaultValue:{value:"30"},description:`Number of bins (intervals) which the values are allocated to.
Each interval is of the size (max - min) / nBins. Defaults to 50.`,name:"nBins",required:!1,type:{name:"number"}},height:{defaultValue:{value:"50"},description:"The height in pixels of the bin with the most values. Defaults to 300.",name:"height",required:!1,type:{name:"number"}},unfilteredValuesShadow:{defaultValue:null,description:"Display a shadow of the unfiltered data (opacity value)",name:"unfilteredValuesShadow",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"Additional CSS classnames to apply (eg secondary, tertiary)",name:"className",required:!1,type:{name:"string"}}}}}catch{}const{fn:ot}=__STORYBOOK_MODULE_TEST__,[J,H]=[0,1e3],Be=1e3,ut=Ke((H-J)/2,H/8,Be,J,H),lt=Oe(J,H,Be),ct=({values:e,barGap:s,color:c,outRangeColor:m,onRangeSelected:k})=>{const[f,w]=B.useState([J,H]),A=d=>{k(d),w(d)};return R.jsx(qe,{values:e,min:J,max:H,selectedRange:f,onChange:A,style:{"--main-histogram-color":c,"--out-range-histogram-color":m,"--histogram-bar-gap":s}})},$e={component:qe,title:"Forms/Histogram Filter",argTypes:{color:{control:"select",name:"--main-histogram-color",options:["var(--fr--color-sapphire-blue)","var(--fr--color-sea-blue)","var(--fr--color-vivid-cerulean)","var(--fr--color-medium-turquoise)","var(--fr--color-gainsborough)","var(--fr--color-weldon-blue)","var(--fr--color-platinum)","white","blue"]},outRangeColor:{control:"select",name:"--out-range-histogram-color",options:["var(--fr--color-sapphire-blue)","var(--fr--color-sea-blue)","var(--fr--color-vivid-cerulean)","var(--fr--color-medium-turquoise)","var(--fr--color-gainsborough)","var(--fr--color-weldon-blue)","var(--fr--color-platinum)","white","blue"]}},args:{barGap:"-1px",color:"var(--fr--color-weldon-blue)",outRangeColor:"var(--fr--color-platinum)",onRangeSelected:ot()},render:ct},ne={args:{...$e.args,values:ut}},re={args:{...$e.args,values:lt}};var ke,Ve,Te;ne.parameters={...ne.parameters,docs:{...(ke=ne.parameters)==null?void 0:ke.docs,source:{originalSource:`{
  args: {
    ...meta.args,
    values: gaussianSample
  }
}`,...(Te=(Ve=ne.parameters)==null?void 0:Ve.docs)==null?void 0:Te.source}}};var ze,Ne,Ae;re.parameters={...re.parameters,docs:{...(ze=re.parameters)==null?void 0:ze.docs,source:{originalSource:`{
  args: {
    ...meta.args,
    values: uniformSample
  }
}`,...(Ae=(Ne=re.parameters)==null?void 0:Ne.docs)==null?void 0:Ae.source}}};const pt=["Gaussian","Uniform"];export{ne as Gaussian,re as Uniform,pt as __namedExportsOrder,$e as default};
