import{r as d,j as c}from"./iframe-CjE16azO.js";import{s as M}from"./timing-functions.es-CZdVE6Va.js";import{B as X}from"./button-DByJrr2R.js";import{L as z}from"./loader-2lZLiUD_.js";import{a as J}from"./lipsum-Bi7KVxrj.js";import{E as Q}from"./external-link-DgN9qUSk.js";var V=typeof global=="object"&&global&&global.Object===Object&&global,Y=typeof self=="object"&&self&&self.Object===Object&&self,K=V||Y||Function("return this")(),w=K.Symbol,H=Object.prototype,Z=H.hasOwnProperty,ee=H.toString,D=w?w.toStringTag:void 0;function te(e){var t=Z.call(e,D),r=e[D];try{e[D]=void 0;var o=!0}catch{}var a=ee.call(e);return o&&(t?e[D]=r:delete e[D]),a}var ne=Object.prototype,re=ne.toString;function oe(e){return re.call(e)}var ie="[object Null]",ae="[object Undefined]",$=w?w.toStringTag:void 0;function se(e){return e==null?e===void 0?ae:ie:$&&$ in Object(e)?te(e):oe(e)}function ce(e){return e!=null&&typeof e=="object"}var le="[object Symbol]";function ue(e){return typeof e=="symbol"||ce(e)&&se(e)==le}var fe=/\s/;function de(e){for(var t=e.length;t--&&fe.test(e.charAt(t)););return t}var me=/^\s+/;function pe(e){return e&&e.slice(0,de(e)+1).replace(me,"")}function O(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var A=NaN,ge=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,be=/^0o[0-7]+$/i,ye=parseInt;function P(e){if(typeof e=="number")return e;if(ue(e))return A;if(O(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=O(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=pe(e);var r=he.test(e);return r||be.test(e)?ye(e.slice(2),r?2:8):ge.test(e)?A:+e}var I=function(){return K.Date.now()},je="Expected a function",ve=Math.max,Se=Math.min;function xe(e,t,r){var o,a,p,n,u,m,f=0,s=!1,i=!1,h=!0;if(typeof e!="function")throw new TypeError(je);t=P(t)||0,O(r)&&(s=!1,i="maxWait"in r,p=i?ve(P(r.maxWait)||0,t):p,h="trailing"in r?!!r.trailing:h);function g(l){var x=o,T=a;return o=a=void 0,f=l,n=e.apply(T,x),n}function b(l){return f=l,u=setTimeout(j,t),s?g(l):n}function S(l){var x=l-m,T=l-f,N=t-x;return i?Se(N,p-T):N}function y(l){var x=l-m,T=l-f;return m===void 0||x>=t||x<0||i&&T>=p}function j(){var l=I();if(y(l))return v(l);u=setTimeout(j,S(l))}function v(l){return u=void 0,h&&o?g(l):(o=a=void 0,n)}function G(){u!==void 0&&clearTimeout(u),f=0,o=m=a=u=void 0}function U(){return u===void 0?n:v(I())}function E(){var l=I(),x=y(l);if(o=arguments,a=this,m=l,x){if(u===void 0)return b(m);if(i)return clearTimeout(u),u=setTimeout(j,t),g(m)}return u===void 0&&(u=setTimeout(j,t)),n}return E.cancel=G,E.flush=U,E}const _=".checkbox-cell",F=xe((e,t)=>{if(!e||!t)return;const r=e==null?void 0:e.querySelectorAll(`${_} > input[type="checkbox"]`);if(r!=null&&r.length){const o=e.querySelectorAll(`${_} > input[type="checkbox"]:checked`);o!=null&&o.length&&r.length!==o.length?(t.checked=!0,t.indeterminate=!0):(t.checked=!!(o!=null&&o.length),t.indeterminate=!1)}else t.checked=!1,t.indeterminate=!1},0,{leading:!1}),ke=e=>{const t=d.useRef(null),r=d.useRef(null),o=d.useRef(null),[a,p]=d.useState(null),[n,u]=d.useState(null);d.useEffect(()=>{if(t.current=a,!a)return;const f=()=>{var h;const s=(h=r.current)==null?void 0:h.querySelectorAll(`${_} > input[type="checkbox"]`);if(!(s!=null&&s.length))return;const i=a.checked;a.disabled=!0,M().then(()=>{for(const g of s.values())i!==g.checked&&g.click();a.disabled=!1})};return a.addEventListener("click",f),()=>{a.removeEventListener("click",f)}},[a]),d.useEffect(()=>{if(r.current=n,!(e&&n))return;const f=s=>{var h,g;const{target:i}=s;if((s instanceof MouseEvent||s instanceof KeyboardEvent)&&i instanceof HTMLElement&&((h=i.parentElement)!=null&&h.matches(_))&&(s.shiftKey&&((g=window.getSelection())==null||g.removeAllRanges()),i instanceof HTMLInputElement)){if(s.shiftKey){const b=Array.from(n.querySelectorAll(`${_} > input[type="checkbox"]`)||[]);let S=Math.max(0,o.current?b.indexOf(o.current):0),y=b.indexOf(i);y<S&&([S,y]=[y,S+1]),M().then(()=>{for(const j of b.slice(S,y))(i.checked&&!j.checked||!i.checked&&j.checked)&&j.click()})}s.isTrusted&&(o.current=i),F(n,t.current),e(s)}};return n==null||n.addEventListener("click",f),()=>{n==null||n.removeEventListener("click",f)}},[n,e]);const m=d.useCallback(()=>{F(r.current,t.current)},[]);return{selectAllRef:p,checkboxContainerRef:u,checkSelectAllSync:m}};function W(e){return({onLoadMoreItems:r,hasMoreData:o,loaderComponent:a=c.jsx(z,{}),data:p,clickToLoad:n=!1,...u})=>{const m=d.useRef(r);m.current=r;const[f,s]=d.useState(!1),i=d.useRef(null),h=d.useCallback(()=>{s(!0),m.current&&m.current()},[]),g=d.useRef(null);g.current=({isIntersecting:v})=>{!v||f||!o||h()};const b=d.useMemo(()=>{if(!(!("IntersectionObserver"in window)||n))return new window.IntersectionObserver(([v])=>{g.current&&g.current(v)})},[n]);d.useEffect(()=>{if(i.current&&b&&!f){const v=i.current;return b.observe(v),()=>b.unobserve(v)}},[b,f]);const S=p==null?void 0:p.length;d.useEffect(()=>{s(!1)},[S]);let y=a;(!("IntersectionObserver"in window)||n)&&!f&&(y=c.jsx(X,{variant:"secondary",onClick:h,"data-testid":"click-to-load-more",children:typeof n=="string"&&n||"Load more data"}));const j={...u,data:p};return c.jsxs(c.Fragment,{children:[c.jsx(e,{...j}),c.jsx("div",{className:"data-loader__loading",ref:i,children:o&&y})]})}}try{W.displayName="withDataLoader",W.__docgenInfo={description:"",displayName:"withDataLoader",props:{}}}catch{}const Te=()=>c.jsxs(c.Fragment,{children:["Column 5 ",c.jsx("small",{children:"FC"})]}),k=50,C=e=>e.id,L=[{label:"Column 1",name:"content1",tooltip:"Some content for the tooltip",render:e=>e.content1,sortable:!0,sorted:"descend"},{label:"Column 2",name:"content2",tooltip:c.jsxs(c.Fragment,{children:["Some ",c.jsx("strong",{children:"richer"})," content for the tooltip with a"," ",c.jsx(Q,{url:"https://www.uniprot.org",children:"link"})]}),render:e=>e.content2},{label:"Column 3",name:"content3",tooltip:c.jsxs(c.Fragment,{children:["Some ",c.jsx("strong",{children:"richer"})," content for the tooltip with a"," ",c.jsx("a",{href:"https://www.uniprot.org",children:"link"})]}),render:e=>e.content3,sortable:!0},{label:"Column 4",name:"content4",render:e=>e.content4,width:"30vw",sortable:!0},{label:c.jsx(Te,{}),name:"content5",render:e=>e.content5}],R=e=>J({keys:L.map(t=>t.name),numberElements:e}),B=({children:e,...t})=>{let r=!1;const o=6,a=.75,p=1,[n,u]=d.useState(R(p));function m(){if(r)return null;r=!0;const s=Math.min(o,k-n.length),i=R(s);return setTimeout(()=>{r=!1,u([...n,...i])},a*1e3)}const f=n.length<k;return c.jsx("div",{...t,children:e({data:n,getIdKey:C,columns:L,hasMoreData:f,onLoadMoreItems:m})})},q=({children:e,...t})=>c.jsx("div",{...t,children:e({data:R(k),getIdKey:C,columns:L})});try{B.displayName="DataLoaderDecorator",B.__docgenInfo={description:"",displayName:"DataLoaderDecorator",props:{}}}catch{}try{q.displayName="DataDecorator",q.__docgenInfo={description:"",displayName:"DataDecorator",props:{}}}catch{}export{q as D,B as a,L as c,ke as u,W as w};
