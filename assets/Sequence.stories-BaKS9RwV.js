import{r as a,j as e}from"./iframe-DIu4I_i1.js";import{a as Y}from"./timing-functions.es-CZdVE6Va.js";import{c as te}from"./index-B6UWKw4u.js";import{B as m}from"./button-CHhBuv40.js";import{D as W}from"./dropdown-button-vlw8ihWu.js";import{I as ne}from"./info-list-DqpvbN3H.js";import{S as ae}from"./download-BUkBUPhZ.js";import{S as oe}from"./spinner-Dj4KoyhL.js";import"./preload-helper-BDBacUwf.js";/* empty css                 */import"./decorated-list-item-sy2kMyEk.js";const se=a.memo(({textToCopy:t,beforeCopy:s="Copy",afterCopy:r="Copied",onCopy:o,...n})=>{const[u,d]=a.useState(!1),l=a.useRef(null);a.useEffect(()=>(d(!1),()=>{l.current=null}),[t]);const p=a.useCallback(()=>{const c=navigator.clipboard.writeText(t).then(()=>l.current===c?(d(!0),o==null||o(t),Y(1e4)):null).then(()=>{l.current===c&&d(!1)});l.current=c},[o,t]);return!("clipboard"in navigator)||!("writeText"in navigator.clipboard)?null:e.jsx(m,{...n,onClick:p,children:u?r:s})});try{copytoclipboard.displayName="copytoclipboard",copytoclipboard.__docgenInfo={description:"",displayName:"copytoclipboard",props:{textToCopy:{defaultValue:null,description:"The text to place into the copy buffer",name:"textToCopy",required:!0,type:{name:"string"}},beforeCopy:{defaultValue:null,description:"The text placed in the button before copy event",name:"beforeCopy",required:!1,type:{name:"string"}},afterCopy:{defaultValue:null,description:"The text placed in the button after copy event",name:"afterCopy",required:!1,type:{name:"string"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((copied: string) => void)"}},disabled:{defaultValue:null,description:"Flag to disable the button",name:"disabled",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"Type to pass to the underlying <button></button>",name:"type",required:!1,type:{name:"enum",value:[{value:'"submit"'},{value:'"reset"'},{value:'"button"'}]}},className:{defaultValue:null,description:"Classnames to be added to the button",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"Variant of the button",name:"variant",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'}]}}}}}catch{}const re="//web.expasy.org/cgi-bin",E=[{name:"ProtParam",url:"/protparam/protparam?"},{name:"ProtScale",url:"/protscale/protscale.pl?"},{name:"Compute pI/Mw",url:"/compute_pi/pi_tool?"},{name:"PeptideMass",url:"/peptide_mass/peptide-mass.pl?"},{name:"PeptideCutter",url:"/peptide_cutter/peptidecutter.pl?"}],ie=t=>e.jsx(m,{variant:"tertiary",onClick:t,children:"Tools"}),$=({accession:t,onBlastClick:s,tools:r})=>{const o=r||E.map(n=>n.name);return e.jsx(W,{visibleElement:ie,children:e.jsxs("ul",{children:[s&&e.jsx("li",{children:e.jsx(m,{variant:"tertiary",onClick:s,children:"BLAST"})}),E.map(n=>o.includes(n.name)?e.jsx("li",{children:e.jsx("a",{href:`${re}${n.url}${t}`,target:"_blank",rel:"noopener noreferrer",children:n.name})},n.name):null)]})})};try{sequencetools.displayName="sequencetools",sequencetools.__docgenInfo={description:"",displayName:"sequencetools",props:{accession:{defaultValue:null,description:"",name:"accession",required:!0,type:{name:"string"}},onBlastClick:{defaultValue:null,description:"",name:"onBlastClick",required:!1,type:{name:"(() => void)"}},tools:{defaultValue:null,description:"",name:"tools",required:!1,type:{name:'("ProtParam" | "ProtScale" | "Compute pI/Mw" | "PeptideMass" | "PeptideCutter")[]'}}}}}catch{}const le=[{name:"Polar",aminoAcids:["R","N","D","Q","E","G","H","K","S","T","Y","B","Z","U","O"],colour:"red"},{name:"Hydrophobic",aminoAcids:["A","C","G","I","L","M","F","P","W","T","V","J","U"],colour:"blue"}],O=le.map(t=>({...t,aminoAcids:new Set(t.aminoAcids)})),ce=/(.{1,10})/g,ue=a.memo(({sequence:t,computeHighlights:s})=>{const r=a.useRef(null),o=a.useMemo(()=>t.match(ce)||[],[t]);return a.useEffect(()=>{var n;if(s)for(const[u,d]of o.entries()){const l=[];let p=0,c=-3;for(const{name:I,aminoAcids:f}of O){for(const T of d)f.has(T)&&l.push(`${p}ch ${c}px 0 1px var(--color-${I}, transparent)`),p+=10;c+=2,p=0}const S=(n=r.current)==null?void 0:n.children[u];S&&(S==null||S.style.setProperty("--box-shadow",l.join(", ")))}},[o,s]),e.jsx("div",{className:"sequence",ref:r,children:o.map((n,u)=>e.jsx("span",{className:te("sequence__chunk",{"sequence__chunk--display-last":u+1===o.length&&n.length===10}),children:n},u))})}),de=t=>e.jsx(m,{variant:"tertiary",onClick:t,children:"Highlight"}),L=({sequence:t,accession:s,onShowSequence:r,onCopy:o,isCollapsible:n=!1,isLoading:u=!1,infoData:d,onBlastClick:l,addToBasketButton:p,downloadUrl:c,showActionBar:S=!0,sequenceTools:I})=>{const[f,T]=a.useState([]),[U,J]=a.useState(!1),[Z,g]=a.useState(n||r&&!t),z=a.useCallback(()=>{g(!1),!t&&r&&r()},[r,t]),X=a.useMemo(()=>Object.fromEntries(f.map(i=>[`--color-${i.name}`,i.colour])),[f]),ee=a.useCallback(i=>{J(!0),T(h=>{const A=new Set(h);return A.has(i)?A.delete(i):A.add(i),Array.from(A)})},[]);return Z||!t?e.jsx("div",{children:e.jsxs(m,{variant:"secondary",onClick:z,children:["Show sequence ",u&&e.jsx(oe,{})]})}):e.jsxs("div",{children:[n&&e.jsx(m,{variant:"secondary",onClick:()=>g(!0),children:"Hide sequence"}),e.jsxs("section",{className:"sequence-container",style:X,children:[S&&s&&e.jsxs("div",{className:"action-bar button-group",children:[e.jsx($,{accession:s,onBlastClick:l,tools:I},"tools"),c&&e.jsxs("a",{className:"button tertiary",href:c,download:!0,children:[e.jsx(ae,{}),"Download"]},"link"),p,e.jsx(W,{visibleElement:de,children:O.map(i=>{const h=`${s}-${i.name}`;return e.jsxs("label",{htmlFor:h,children:[e.jsx("input",{type:"checkbox",id:h,onChange:()=>ee(i),checked:f.includes(i),style:{accentColor:i.colour}}),i.name]},i.name)})},"highlight"),e.jsx(se,{textToCopy:t,beforeCopy:"Copy sequence",afterCopy:"Copied",className:"tertiary",onCopy:o},"copy")]}),e.jsx(ne,{infoData:d,isCompact:!0,columns:!0}),e.jsx(ue,{sequence:t,computeHighlights:U})]})]})};try{sequence.displayName="sequence",sequence.__docgenInfo={description:"",displayName:"sequence",props:{sequence:{defaultValue:null,description:"The sequence",name:"sequence",required:!1,type:{name:"string"}},accession:{defaultValue:null,description:"The accession corresponding to the sequence",name:"accession",required:!1,type:{name:"string"}},onShowSequence:{defaultValue:null,description:`Action triggered when the "Show sequence" button is clicked.
This button will be displayed by default if no sequence is passed
down to the component.`,name:"onShowSequence",required:!1,type:{name:"(() => void)"}},isCollapsible:{defaultValue:{value:"false"},description:'Display option to show/hide the sequence. If no sequence is\nprovided and `onShowSequence` is defined, this defaults to "true"',name:"isCollapsible",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:{value:"false"},description:"If the sequence is loading, display a spinner in the button",name:"isLoading",required:!1,type:{name:"boolean"}},infoData:{defaultValue:null,description:"Data to be displayed in an InfoData component above the sequence",name:"infoData",required:!1,type:{name:"InfoListItem[]"}},downloadUrl:{defaultValue:null,description:"The URL to download the isoform sequence",name:"downloadUrl",required:!1,type:{name:"string"}},onBlastClick:{defaultValue:null,description:`Callback which is fired when the BLAST button is clicked. If no callback
is provided then no BLAST button will be displayed.`,name:"onBlastClick",required:!1,type:{name:"(() => void)"}},addToBasketButton:{defaultValue:null,description:`Callback which is fired when the Add button is clicked. If no callback
is provided then no Add button will be displayed.`,name:"addToBasketButton",required:!1,type:{name:"ReactNode"}},showActionBar:{defaultValue:{value:"true"},description:"",name:"showActionBar",required:!1,type:{name:"boolean"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((copied: string) => void)"}},sequenceTools:{defaultValue:null,description:"",name:"sequenceTools",required:!1,type:{name:'("ProtParam" | "ProtScale" | "Compute pI/Mw" | "PeptideMass" | "PeptideCutter")[]'}}}}}catch{}const V="MFNFPHPAIDLASRMKSSPLMAGGSSSASSEDLFSPPMMEDLDTPMTEYPMGSPPRMPYRGEDIEIAFLRSEASIKKSSLFNDKFAATLDDLSARPIDSASLIGKLQSMTRSVREILDSGGEDIEIAFLRSEASIKKSSLFNDKFAATLDDLSARPIDSASLIGKLQSMTRSVREILDSGDQLVHEDGPQEILKQFVRVVNKHLCQDEDIHTVLAPLALEPEEKFHIIQTYYQAISMTQFDQLVHEDGPQEILKQFVRVVNKHLCQDEDIHTVLAPLALEPEEKFHIIQTYYQAISMTQFVSPKWTSSLLSDALCRRANIVTVFNGQGVEGYFSELQHLYDTYGGLLAEPLYALSKQLKGVSPKWTSSLLSDALCRRANIVTVFNGQGVEGYFSELQHLYDTYGGLLAEPLYALSKQLKGLASDVRAQDMYPHGLDVIGWLENPEARPSTDYLLSAPVSQPLIGLVQLLNYAITCKILNKLASDVRAQDMYPHGLDVIGWLENPEARPSTDYLLSAPVSQPLIGLVQLLNYAITCKILNKSPGEFARHLSGSAGHSQGIVVAAMLATVVSWPTFFDAASTALQVLFWIGCRSQQCYPSHSSPGEFARHLSGSAGHSQGIVVAAMLATVVSWPTFFDAASTALQVLFWIGCRSQQCYPSHSIPPSLVDQSERLSPMLSVKGASRESLLKYLDEHNRHLPPAQQGSLALINGRQQFVVAGNPIPPSLVDQSERLSPMLSVKGASRESLLKYLDEHNRHLPPAQQGSLALINGRQQFVVAGNPLSLYAFANKLRAASNNSSTTNTARVPFSQRPLLITARFLPISVPFHTSLLEDAEAQILEDED",{fn:D}=__STORYBOOK_MODULE_TEST__,Ve={component:L,title:"Biocomponents/Sequence",args:{onBlastClick:D(),onCopy:D()}},y={render:({onBlastClick:t,onCopy:s})=>e.jsx(L,{sequence:V,accession:"P05067",downloadUrl:"https://wwwdev.ebi.ac.uk/uniprot/api/uniprotkb/accession/P05067.fasta",onBlastClick:t,onCopy:s,addToBasketButton:e.jsx(m,{variant:"tertiary",onClick:D(),children:"Add To Basket"})})},q={render:()=>e.jsx(L,{sequence:V,showActionBar:!1})},b={render:()=>{const t=[{title:"Item 1",content:e.jsx("div",{children:"Some content"})},{title:"Another item",content:e.jsx("div",{children:"Some more content"})}];return e.jsx(L,{sequence:V,infoData:t,isCollapsible:!0})}},pe=()=>{const[t,s]=a.useState(""),[r,o]=a.useState(!1),n=async()=>{o(!0),await Y(2e3),s(V),o(!1)};return e.jsx(L,{sequence:t,isLoading:r,onShowSequence:n})},P={render:pe},C={render:({onBlastClick:t})=>e.jsx($,{accession:"P05067",onBlastClick:t})};var x,v,G;y.parameters={...y.parameters,docs:{...(x=y.parameters)==null?void 0:x.docs,source:{originalSource:`{
  render: ({
    onBlastClick,
    onCopy
  }) => <SequenceComponent sequence={sequenceData} accession="P05067" downloadUrl="https://wwwdev.ebi.ac.uk/uniprot/api/uniprotkb/accession/P05067.fasta" onBlastClick={onBlastClick} onCopy={onCopy} addToBasketButton={<Button variant="tertiary" onClick={fn()}>
          Add To Basket
        </Button>} />
}`,...(G=(v=y.parameters)==null?void 0:v.docs)==null?void 0:G.source}}};var Q,k,R;q.parameters={...q.parameters,docs:{...(Q=q.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  render: () => <SequenceComponent sequence={sequenceData} showActionBar={false} />
}`,...(R=(k=q.parameters)==null?void 0:k.docs)==null?void 0:R.source}}};var w,N,_;b.parameters={...b.parameters,docs:{...(w=b.parameters)==null?void 0:w.docs,source:{originalSource:`{
  render: () => {
    const data = [{
      title: 'Item 1',
      content: <div>Some content</div>
    }, {
      title: 'Another item',
      content: <div>Some more content</div>
    }];
    return <SequenceComponent sequence={sequenceData} infoData={data} isCollapsible />;
  }
}`,...(_=(N=b.parameters)==null?void 0:N.docs)==null?void 0:_.source}}};var j,B,F;P.parameters={...P.parameters,docs:{...(j=P.parameters)==null?void 0:j.docs,source:{originalSource:`{
  render: SequenceAsyncLoadRender
}`,...(F=(B=P.parameters)==null?void 0:B.docs)==null?void 0:F.source}}};var K,H,M;C.parameters={...C.parameters,docs:{...(K=C.parameters)==null?void 0:K.docs,source:{originalSource:`{
  render: ({
    onBlastClick
  }) => <SequenceToolsComponent accession="P05067" onBlastClick={onBlastClick} />
}`,...(M=(H=C.parameters)==null?void 0:H.docs)==null?void 0:M.source}}};const Ie=["Sequence","SequenceWithoutActionBar","SequenceCollapsableWithInfoData","SequenceAsyncLoad","SequenceTools"];export{y as Sequence,P as SequenceAsyncLoad,b as SequenceCollapsableWithInfoData,C as SequenceTools,q as SequenceWithoutActionBar,Ie as __namedExportsOrder,Ve as default};
